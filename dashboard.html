<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DigiTraderPro Admin Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    h1 {
      color: #333;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background: #fff;
    }
    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: left;
    }
    th {
      background-color: #007bff;
      color: white;
    }
    button {
      background-color: #28a745;
      border: none;
      padding: 8px 12px;
      color: white;
      cursor: pointer;
      border-radius: 4px;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    .message {
      margin-top: 15px;
      padding: 10px;
      border-radius: 4px;
    }
    .success {
      background-color: #d4edda;
      color: #155724;
    }
  </style>
</head>
<body>

  <h1>DigiTraderPro Admin Dashboard</h1>

  <h3>Pending Deposits</h3>
  <table id="deposits-table">
    <thead>
      <tr>
        <th>Deposit ID</th>
        <th>User</th>
        <th>Amount (USD)</th>
        <th>Date</th>
        <th>Approve</th>
      </tr>
    </thead>
    <tbody>
      <!-- deposits will load here -->
    </tbody>
  </table>

  <div id="message" class="message" style="display:none;"></div>

  <script>
    // Dummy pending deposits data (simulate API response)
    let pendingDeposits = [
      { id: 'D1001', user: 'alice', amount: 150, date: '2025-08-08 14:23' },
      { id: 'D1002', user: 'bob', amount: 250, date: '2025-08-08 15:00' },
      { id: 'D1003', user: 'charlie', amount: 500, date: '2025-08-09 09:45' }
    ];

    const depositsTableBody = document.querySelector('#deposits-table tbody');
    const messageDiv = document.getElementById('message');

    // Function to render deposits in the table
    function renderDeposits() {
      depositsTableBody.innerHTML = '';
      if(pendingDeposits.length === 0) {
        depositsTableBody.innerHTML = '<tr><td colspan="5" style="text-align:center;">No pending deposits</td></tr>';
        return;
      }
      pendingDeposits.forEach(deposit => {
        const tr = document.createElement('tr');

        tr.innerHTML = `
          <td>${deposit.id}</td>
          <td>${deposit.user}</td>
          <td>$${deposit.amount.toFixed(2)}</td>
          <td>${deposit.date}</td>
          <td><button data-id="${deposit.id}">Approve</button></td>
        `;

        depositsTableBody.appendChild(tr);
      });

      // Add event listeners to approve buttons
      document.querySelectorAll('button[data-id]').forEach(button => {
        button.addEventListener('click', () => {
          approveDeposit(button.getAttribute('data-id'), button);
        });
      });
    }

    // Simulate API call to approve deposit
    function approveDeposit(depositId, button) {
      button.disabled = true;
      button.textContent = 'Approving...';

      // Simulate delay for API request
      setTimeout(() => {
        // Remove deposit from pending list
        pendingDeposits = pendingDeposits.filter(d => d.id !== depositId);

        showMessage(`Deposit ${depositId} approved successfully.`, 'success');
        renderDeposits();
      }, 1000);
    }

    // Show status message
    function showMessage(text, type) {
      messageDiv.textContent = text;
      messageDiv.className = 'message ' + type;
      messageDiv.style.display = 'block';
      setTimeout(() => {
        messageDiv.style.display = 'none';
      }, 3000);
    }

    // Initial load
    renderDeposits();
  </script>

</body>
</html>
